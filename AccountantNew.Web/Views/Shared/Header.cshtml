@model IEnumerable<AccountantNew.Web.Models.NewCategoryViewModel>

@{
    var lstNew = (IEnumerable<AccountantNew.Web.Models.NewViewModel>)ViewBag.LstNew;
    var newModel = lstNew.Where(x => x.NewCategory.Name.Contains("Tin mới"));

    var notificationModel = (IEnumerable<AccountantNew.Web.Models.NewViewModel>)ViewBag.LstNotifi;

}

<script>
    function gotoNews() {
        window.location.href = "/tin-moi.html";
    }
    function gotoNotifi() {
        window.location.href = "/thong-bao.html";
    }

    (function ($) {
        $(function () { //on DOM ready 
            $("#scroller").simplyScroll();
        });
    })(jQuery);
</script>

<div id="newedge-top-bar">
    <div class="container">
        <div class="row">
            <div id="logo" class="col-xs-4 col-sm-3 col-md-3 hidden-sm hidden-xs col-header-3">
                <a href="#"><img src="~/Assets/client/img/presets/preset1/logo.png" alt="logo"></a>
            </div> <!-- //logo -->
            <div class="trending">
                <div class="col-sm-3 col-md-2 col-header-2">
                    <h3 class="heading">Tiêu điểm:</h3>
                </div>
                <div class="col-sm-9 col-md-3 col-header-4-5">
                    <ul id="scroller" class="simply-scroll-list" style="padding-top:23px">
                        <li>
                            <p>
                                <a href="design-pattern/hieu-ve-su-khac-nhau-giua-cac-design-pattern-mvc-mvp-va-mvvm-100.html" title="Hiểu về sự khác nhau giữa các Design Pattern MVC, MVP và MVVM" rel="bookmark">
                                    <span class="title">Hiểu về sự khác nhau giữa các Design Pattern MVC, MVP và MVVM</span>
                                </a>
                            </p>
                        </li>
                        <li>
                            <p>
                                <a href="design-pattern/hieu-ve-su-khac-nhau-giua-cac-design-pattern-mvc-mvp-va-mvvm-100.html" title="Hiểu về sự khác nhau giữa các Design Pattern MVC, MVP và MVVM" rel="bookmark">
                                    <span class="title">Hiểu về sự khác nhau giữa các Design Pattern MVC, MVP và MVVM</span>
                                </a>
                            </p>
                        </li>
                        <li>
                            <p>
                                <a href="design-pattern/hieu-ve-su-khac-nhau-giua-cac-design-pattern-mvc-mvp-va-mvvm-100.html" title="Hiểu về sự khác nhau giữa các Design Pattern MVC, MVP và MVVM" rel="bookmark">
                                    <span class="title">Hiểu về sự khác nhau giữa các Design Pattern MVC, MVP và MVVM</span>
                                </a>
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-sm-12 col-md-4 col-header-3-5">
                <div class="top-right">
                    <div class="newedge-date">
                        <span id="time">	 </span>
                    </div> <!-- //date -->
                    <div class="newedge-login">
                        <a href="#" role="button" data-toggle="modal" data-target="#login">
                            <i class="fa fa-user"></i>
                        </a>
                        <!-- Login modal -->
                        <div id="login" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
                            <div class="modal-dialog">
                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-close"></i></button>
                                        <h1 class="text-left">Đăng nhập</h1>
                                    </div>
                                    <div class="modal-body">
                                        <form action="#" method="post" id="login-form">
                                            <fieldset class="userdata">
                                                <input id="username" placeholder="Tài khoản" type="text" name="username" class="form-control">
                                                <input id="password" type="password" placeholder="Mật khẩu" name="password" class="form-control">
                                                <div class="remember-wrap">
                                                    <input id="remember" type="checkbox" name="remember" class="inputbox" value="yes">
                                                    <label for="remember">Nhớ tôi</label>
                                                </div>
                                                <div class="button-wrap pull-left">
                                                    <input type="submit" name="Submit" class="btn btn-block btn-success" value="Đăng nhập">
                                                </div>
                                                <p class="forget-name-link pull-left">
                                                    Forgot <a href="#">
                                                        Username
                                                    </a> or <a href="#">
                                                        Password
                                                    </a>
                                                </p>
                                            </fieldset>
                                        </form>
                                    </div> <!--/Modal body-->
                                    <div class="modal-footer">
                                        New Here? <a href="#">
                                            Create an account
                                        </a>
                                    </div> <!--/Modal footer-->
                                </div> <!-- Modal content-->
                            </div> <!-- /.modal-dialog -->
                        </div> <!-- //Login modal -->
                    </div> <!-- //login -->
                    <div class="newedge-search">
                        <div class="search-icon-wrapper">
                            <i class="fa fa-search"></i>
                        </div>
                        <div class="search-wrapper">
                            <form action="#" method="post">
                                <input name="searchword" maxlength="200" class="inputboxnewedge-top-search" type="text" size="20" placeholder="Search ...">
                                <i id="search-close" class="fa fa-close"></i>
                            </form>
                        </div> <!-- //search-wrapper -->
                    </div> <!-- //search -->
                </div> <!-- //top-right -->
            </div>
            </div> <!-- //row -->
    </div> <!-- //container -->
</div>

<div id="mobile-nav-bar" class="mobile-nav-bar">
    <div class="container">
        <div class="row">
            <div class="visible-sm visible-xs col-sm-12">
                <div id="logo" class="mobile-logo pull-left">
                    <a href="index.html"><img src="~/Assets/client/img/presets/preset1/logo.png" alt="logo"></a>
                </div>
            </div>
        </div>
    </div>
</div>

<nav id="navigation-bar" class="navigation hidden-sm hidden-xs">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <ul class="list-inline megamenu-parent">
                    <li>
                        <a href="/">Trang chủ</a>
                    </li>
                    <li class="has-child menu-justify">
                        @{
                            var modelTinTuc = Model.SingleOrDefault(x => x.Name == "Tin tức");
                            var childTinTucs = Model.Where(x => x.ParentID == modelTinTuc.ID);
                            var urlTinTuc = "/" + modelTinTuc.Alias + ".html";
                        }
                        <a href="@urlTinTuc">@modelTinTuc.Name</a>
                        <div class="dropdown-inner container dropdown-menu-full-wrapper">
                            <div class="dropdown-menu-full vertical-tabs">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <ul class="tab-btns" role="tablist">
                                                    <li class="active"><a id="news" onclick="gotoNews()" href="#tinmoi" data-toggle="tab">@childTinTucs.First().Name</a></li>
                                                    @foreach (var childTinTuc in childTinTucs.Skip(1))
                                                    {
                                                        <li>
                                                            <a id="notification" onclick="gotoNotifi()" href="#thongbao" data-toggle="tab">@childTinTuc.Name</a>
                                                        </li>
                                                    }
                                                </ul>
                                            </div> <!-- //col-sm-3 -->

                                            <div class="col-sm-9">
                                                <div class="tab-content simple-article-overlay">
                                                    <div role="tabpanel" class="tab-pane active" id="tinmoi">
                                                        <div class="row">
                                                            @foreach (var item in lstNew)
                                                            {
                                                                var urlItem = "/" + item.NewCategory.Alias + "/" + item.Alias + "-" + item.ID + ".html";
                                                                <div class="col-sm-4">
                                                                    <article>
                                                                        <div class="article-inner">
                                                                            <div class="overlay"></div>
                                                                            <div class="img-wrapper"><img class="img-100p latest-post-image thumb-header" src="@item.Image" alt="img"></div>
                                                                            <div class="article-info">
                                                                                <h4 class="entry-title">
                                                                                    <a href="@urlItem">@item.Name</a>
                                                                                </h4>
                                                                            </div>
                                                                        </div>
                                                                    </article>
                                                                </div>
                                                            }
                                                        </div>
                                                    </div>
                                                    <div role="tabpanel" class="tab-pane active" id="thongbao">
                                                        <div class="row">
                                                            @foreach (var item in notificationModel)
                                                            {
                                                                var urlItem = "/" + item.NewCategory.Alias + "/" + item.Alias + "-" + item.ID + ".html";
                                                                <div class="col-sm-4">
                                                                    <article>
                                                                        <div class="article-inner">
                                                                            <div class="overlay"></div>
                                                                            <div class="img-wrapper"><img class="img-100p latest-post-image thumb-header" src="@item.Image" alt="img"></div>
                                                                            <div class="article-info">
                                                                                <h4 class="entry-title">
                                                                                    <a href="@urlItem">@item.Name</a>
                                                                                </h4>
                                                                            </div>
                                                                        </div>
                                                                    </article>
                                                                </div>
                                                            }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div> <!-- //tab-content -->
                                        </div> <!-- //col-sm-9 -->
                                    </div>
                                </div> <!-- //row -->
                            </div>
                        </div>
                     </li>
                    @foreach (var category in Model.Where(x => x.ParentID == null && x.Name != "Tin tức"))
                    {
                        var url = "/" + category.Alias + "-file.html";
                        <li class="has-child">
                            <a href="@url">@category.Name</a>
                            <div class="dropdown-inner">
                                @{
                                    var lv1Categories = Model.Where(x => x.ParentID == category.ID);
                                }
                                <ul class="dropdown-items">
                                    @foreach (var lv1Category in lv1Categories)
                                    {
                                        var lv2Categories = Model.Where(x => x.ParentID == lv1Category.ID);
                                        if (lv2Categories.Count() == 0)
                                        {
                                            <li>
                                                <a href="">@lv1Category.Name</a>
                                            </li>
                                        }
                                        else
                                        {
                                            <li class="has-child">
                                                <a href="javascript:void(0)">@lv1Category.Name</a>
                                                <div class="dropdown-inner sub-dropdown-inner">
                                                    <ul class="dropdown-items">
                                                        @foreach (var lv2Category in lv2Categories)
                                                        {
                                                            var lv3Categories = Model.Where(x => x.ParentID == lv2Category.ID);
                                                            if (lv3Categories.Count() == 0)
                                                            {
                                                                <li><a href="javascript:void(0)">@lv2Category.Name</a></li>
                                                            }
                                                            else
                                                            {
                                                                <li class="has-child">
                                                                    <a href="javascript:void(0)">@lv2Category.Name</a>
                                                                    <div class="dropdown-inner sub-dropdown-inner">
                                                                        <ul class="dropdown-items">
                                                                            @foreach (var lv3Category in lv3Categories)
                                                                            {
                                                                                <li><a href="javascript:void(0)">@lv3Category.Name</a></li>
                                                                            }
                                                                        </ul>
                                                                    </div>
                                                                </li>
                                                            }
                                                        }
                                                    </ul>
                                                </div>
                                            </li>
                                        }
                                    }
                                </ul>
                            </div>
                        </li>
                    }
                 </ul>
            </div>
           </div>
        </div>
    </nav>
   
<script>
    function startTime() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        m = checkTime(m);
        s = checkTime(s);
        document.getElementById('time').innerHTML = today.toDateString() + ' ' +
        h + ":" + m + ":" + s;
        var t = setTimeout(startTime, 500);
    }
    function checkTime(i) {
        if (i < 10) { i = "0" + i };  // add zero in front of numbers < 10
        return i;
    }

</script>
